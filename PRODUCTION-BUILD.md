# üì¶ –≠–∫—Å–ø–æ—Ä—Ç —á–∏—Å—Ç–æ–≥–æ production –±–∏–ª–¥–∞

–≠—Ç–æ—Ç –≥–∞–π–¥ –ø–æ–º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —á–∏—Å—Ç—ã–π –±–∏–ª–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –±–µ–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã poehali.dev –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –Ω–∞ –≤–∞—à–µ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ.

## üéØ –î–ª—è —á–µ–≥–æ —ç—Ç–æ –Ω—É–∂–Ω–æ

–í —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤ `index.html` –ø–æ–¥–∫–ª—é—á–µ–Ω—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã:
- `pp-min-2.js` - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- `route-min.js` - –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
- `inspector-min.js` - –≤–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä
- `telemetry-min.js` - —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è

–≠—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω—É–∂–Ω—ã —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ poehali.dev –∏ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –Ω–∞ –≤–∞—à–µ–º —Ö–æ—Å—Ç–∏–Ω–≥–µ.

## üöÄ –°–ø–æ—Å–æ–± 1: –ë—ã—Å—Ç—Ä—ã–π —ç–∫—Å–ø–æ—Ä—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### Linux/macOS:
```bash
chmod +x build-production.sh
./build-production.sh
```

### Windows:
```cmd
build-production.bat
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –ø–∞–ø–∫–µ `dist/` –±—É–¥–µ—Ç —á–∏—Å—Ç—ã–π –±–∏–ª–¥ –±–µ–∑ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤.

## üõ† –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–æ–π —ç–∫—Å–ø–æ—Ä—Ç

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —á–∏—Å—Ç—ã–π index.html
–í—Ä–µ–º–µ–Ω–Ω–æ –∑–∞–º–µ–Ω–∏—Ç–µ `index.html` –Ω–∞ `index.production.html`:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
cp index.html index.html.backup

# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ production –≤–µ—Ä—Å–∏—é
cp index.production.html index.html
```

### –®–∞–≥ 2: –°–æ–±–µ—Ä–∏—Ç–µ –±–∏–ª–¥
```bash
npm run build
```

### –®–∞–≥ 3: –í–µ—Ä–Ω–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π index.html
mv index.html.backup index.html
```

## üìÅ –ß—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –≤ –ø–∞–ø–∫–µ `dist/` –±—É–¥–µ—Ç:
```
dist/
‚îú‚îÄ‚îÄ index.html          # –ß–∏—Å—Ç—ã–π HTML –±–µ–∑ —Å–∫—Ä–∏–ø—Ç–æ–≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
‚îú‚îÄ‚îÄ favicon.svg         # –ò–∫–æ–Ω–∫–∞ —Å–∞–π—Ç–∞
‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îú‚îÄ‚îÄ index-[hash].js     # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JS
‚îÇ   ‚îú‚îÄ‚îÄ index-[hash].css    # –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ ...                 # –î—Ä—É–≥–∏–µ —Ä–µ—Å—É—Ä—Å—ã
```

## üåê –†–∞–∑–º–µ—â–µ–Ω–∏–µ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ

### Nginx
–°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```nginx
server {
    listen 80;
    server_name –≤–∞—à-–¥–æ–º–µ–Ω.ru;
    root /path/to/dist;
    index index.html;

    # SPA routing - –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ index.html
    location / {
        try_files $uri $uri/ /index.html;
    }

    # –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç–∏–∫–∏
    location /assets {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

### Apache
–°–æ–∑–¥–∞–π—Ç–µ `.htaccess` –≤ –ø–∞–ø–∫–µ `dist/`:
```apache
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>
```

### Vercel
–°–æ–∑–¥–∞–π—Ç–µ `vercel.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```json
{
  "rewrites": [
    { "source": "/(.*)", "destination": "/index.html" }
  ]
}
```

–ó–∞—Ç–µ–º:
```bash
vercel --prod
```

### Netlify
–°–æ–∑–¥–∞–π—Ç–µ `netlify.toml` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
```toml
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Netlify UI:
1. Drag & drop –ø–∞–ø–∫—É `dist/`
2. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Site: Build & Deploy ‚Üí Redirects ‚Üí –¥–æ–±–∞–≤—å—Ç–µ –ø—Ä–∞–≤–∏–ª–æ `/* /index.html 200`

### Shared Hosting (–æ–±—ã—á–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥)
1. –°–∫–∞—á–∞–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏ `dist/`
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —á–µ—Ä–µ–∑ FTP –≤ –∫–æ—Ä–Ω–µ–≤—É—é –ø–∞–ø–∫—É —Å–∞–π—Ç–∞ (–æ–±—ã—á–Ω–æ `public_html` –∏–ª–∏ `www`)
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `.htaccess` –¥–ª—è Apache –Ω–∞—Å—Ç—Ä–æ–µ–Ω (—Å–º. –≤—ã—à–µ)

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –æ—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à —Å–∞–π—Ç –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12):
- ‚ùå –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ `cover is not defined`
- ‚ùå –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ CORS –æ—Ç `api.poehali.dev`
- ‚ùå –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–≥—Ä—É–∑–æ–∫ `pp-min-2.js`, `telemetry-min.js` –∏ —Ç.–¥.
- ‚úÖ –î–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –≤–∞—à –∫–æ–¥ –∏–∑ `/assets/`

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

–ü—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–¥–∞ –ø–æ–≤—Ç–æ—Ä—è–π—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç `build-production.sh` –∏–ª–∏ `.bat`
2. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –Ω–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `dist/` –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥
3. –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞ (Ctrl+Shift+R)

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è backend —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ë–î, –æ–Ω–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —á–µ—Ä–µ–∑ API poehali.dev
- **Secrets**: –°–µ–∫—Ä–µ—Ç—ã (API –∫–ª—é—á–∏) –æ—Å—Ç–∞—é—Ç—Å—è –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ backend —Ñ—É–Ω–∫—Ü–∏—è–º
- **GitHub**: –í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å GitHub –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–¥–æ–º

## üÜò –ü—Ä–æ–±–ª–µ–º—ã

**–ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω –ø–æ—Å–ª–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ª–∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã –¥–ª—è SPA (–≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã ‚Üí index.html)
- –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤

**404 –æ—à–∏–±–∫–∏ –Ω–∞ –∞—Å—Å–µ—Ç—ã:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞–ø–∫–∞ `assets/` –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –Ω–∞ —Ö–æ—Å—Ç–∏–Ω–≥
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –≤ Network tab (F12)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è backend —Ñ—É–Ω–∫—Ü–∏–∏, –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–∞ poehali.dev
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ backend —Ñ—É–Ω–∫—Ü–∏—è—Ö
